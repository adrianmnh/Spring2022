IBM:
* 30% less to design and build **Containerized data center**
* Cheaper than air conditionining dropped ceilings/raised floors

## Cloud Deployment mode

### Public Cloud
Cloud infrastructure is available to the general public, owned by organization selling cloud services
* Large scale infrastructure available on a rental basis

### Private Cloud
Infrastructure for **single organization only**, may be managed by the org or a 3rd party(Virtual Private Cloud), hosted internally or externally

Key techniques
* Virtualization techniques(VMWare, Xen, KVM) 
* Virtual Private network(VPN)

`More expensive, more secure(behind firewall)`
* Still have to buy, build and manage
* May not free from the responsibility for procurring (hardware+software upgrade$$) and maintenance(in-house expertise $$$)

> New York Times "Time Machine": 15 million articles were put into the clous on servers owned by Amazon

* Open-source Software for building private and public clouds: **Open Stack** and **Apache CLoudStack**

### Community Cloud
Shared by several organizations that have shared concerns

Some users may required different levels of security

* High Security: Access to cloud is granted only after a trusted validation of identity(required by regulating bodies)

* High Availability: Resources are 99.99% available(or better): **Banking** and **Military**

* High Performance: Optimized for high transaction rates and extremely low-latency: **High Frequency Trading(HFT)**

**GovernmentClouds**

Government organizations may share computing infrastructure on the cloud to manage data related to citizens: **Amazon AWS GovCloud** and **IBM SmartCloud** for government(SCG)

**Cloud for High Performance Computing**

A different set of requirements
* Close to the 'metal'
* User-space communication(bypass OS)
* high-speed interconnect: **InfiniBand**

Clients share a common set of "Big Data" - ranging in size from Terabytes to Petabyes. Need a very fast I/O subsystem (SSD-based storage)

**Financial Services Clouds**

Require microseconds or at least milliseconds of response time and latency measurements

**NYSE Technologies: Financial Services Community Cloud**(electronic trading, maket data analysis)

**Hybrid Clouds**

Integrated cloud service utilizing both private and public clouds to perform distinct functions within the same organization

* non-sensitive operations on public cloud, and sensitive operations handled in-house(private)
* bound by standardized or proprietary technilogy that enables 

<img src="./cloud-img/02-01.png">

TPU Tensor Processing Units


<img src="./cloud-img/break.png">

### *Class 3 - 2/10/2022*
## Availability Zones
**Unique physical locations** within an Azure region. Made up of **one or more data centers** equipped with **independent power, cooling,and networking**. To ensure resiliency, there's a minimum of three separete zones in all enable regions

The physical separtion of Availability Zones within a region protects applications and data from **datacenter failures**. Zone-redundant services replicate your apps and data across Availability Zones to protect from single-points-of-failure.

You can **synchronously** replicate your apps and data using Availability Zones for **high-availability** and **asynchronously** replicate across Azure regions for **disaster recovery protection**

<img src="./cloud-img/04-01.png" width =200>

## Project Natick
long lived, resilient data centers that operate *lights out*, nobody on site, no maintenance for years.
* June 2008
  * 12 racks
  * 864 servers
  * 27.6 petabytes of storage
  
Retrieved for analysys after more than 2 years at the bottom of the ocean

Power consumption: 240 kW generated by on-shore wing and solar along with off-shore tide and wave power

Data shows this approach improves performance and reliability of the datacenter when compared to land. **Project Natick had 1/8th the failure rate of land data centers.** Not only is a greener future possible, but it is economically practical.

This is due to the atmosphere of **nitrogen**, which is less corrosive than oxygen, and the **absence of people to bump and jostle** components, are the primary reasons for the difference

Operating with a highly efficient **PUE** of **1.07**
>power usage effectiveness = total power / server power; lower values are better, 1.0 is perfect

## Google's data center
Around **260 million watts** of power is used by Google data centers, enough to consistently power 200,000 homes

### data center @Okalahoma
Hundreds of fans tunnel hot air from the server racks into a cooling unit to be recirculated in. The **green lights** are the server status LEDs reflecting 


## Facebook's data center
Doesn't use traditional air conditioning, instead relying completly on outside air.

Power Usage Effectiveness @Prineville 

## AWS's data centers
The AWS Cloud spans 84 Availability Zones within 26


<img src="./cloud-img/break.png">

### *Class 4 - 2/15/2022*



<img src="./cloud-img/break.png">

### *Class 7 - 2/24/2022*
## Everything at google runs in cointainers
* Gmail Webserach Maps
* MapReduce MillWHeel Pregel
* Colossus BigTable SPanner
* Even Gogogle Cloud COmputing

## Container Orchestration
`More than packing and isolation needed`

Scheduling?

Lifecycle and health?

Discovery?

Monitoring?

Auth{n,z}

Aggregates?

Scaling?

Containers working together have dependencies.

## Open Source Containers: **Kubernetes**

Greek for Helmsamn; also the root of the word Governor and cybernetic
* Container orchestrator
* Builds on Docker containers
  * also supporting other container technologies
* Multiple cloud and bare-metal environments
* Supports existing OSS apps
  * cannot require appds becoming cloud-native
* Inspired and informed by Google's experiences and internal systems
* **100% Open source**, written in **GO**

Let users manage applications, not machines
> Look at Borg and its connection with Kubernetes


![](./cloud-img/07-01.png)

Basic Unit of container: Pod

## Pod
A kubernetes abstraction represents a group of one or more application containers, and some shared resources for those containers

* Shared storage, as Volumes
* Networking, as a unique cluster IP address
* Information about how to run each container, such as the container image version or specific ports to use

![](./cloud-img/07-02.png)

Containers can be associated with different labels

## Pod Lifecycle
Once schedule to a node, pods do not move
* restart policy means restart **in-place**

Pods can be ovserved _pending, running, succeeded, or failed_
* _failed_ is **really** the end - no more restarts
* no complex state machine logic

Pods are **not rescheduled** by the scheduler or apiserver
* Even if a  node dies
* controllers are responsible for this
* keeps the scheduler **simple**

Appds should consider there rules
* Services hide this? `services don't show pods prop`
* Makes pod-to-pod communication more formal

## Pod

>Simplest unit in Kubernetes
* Represents Process running in your cluster
* Encapsulates a container(or sometimes multiple)
* Replicating a Pod serves to scale and application horizontally

![](./cloud-img/07-03.png)

## ReplicaSet

>Maintains a set of identical Pods
* Definition consists of:
  * Number of replicas
  * Pod Template
  * Selectyor to identify which Pods it can acquire
> Generally encapsulated by a Deployment

![](./cloud-img/07-04.png)

## Deployment

> Provides updates for pods and replicasets
* Runs multiple replicas of your application
* Suitable for stateless applications

![](./cloud-img/07-05.png)

## Control Plane

### Kube-apiserver

> Provides a forward facing REST interface into the Kubernetes control plane and datastore

* All clients and other applications interact with KLubernetes **strictly** through the API Server
* Acts as the gatekleeper to the cluster by handling authentication and authorization, request validation, mutation, and admission control in addition to being the front-end to the backing datastore

<img src="./cloud-img/break.png">
